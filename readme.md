<h1 align="center"> Инструкция по настройке Zapret от remittor при помощи Zapret Manager</h1>

> [!IMPORTANT]
> Данный способ **не гарантирует 100% работу** !!!


# Оглавление
- [Возможности](#-возможности)
- [Подготовка системы](#-подготовка-системы)
- [Запуск менеджера](#-запуск-менеджера)
- [Быстрый старт и пункты меню](#-быстрый-старт)
- [Cтратегии для Youtube](#-стратегии-для-youtube)
- [Cтратегии используемые в скрипте](#-стратегии-используемые-в-скрипте)
- [Дерево меню Zapret Manager](#-дерево-меню-zapret-manager)
- [Благодарности](#благодарности)
- [Поддержать проект](https://github.com/StressOzz)

---

## 🔹 Возможности

### Zapret Manager позволяет:

- Установить **Zapret** последней версии
- Выбрать стратегию для установки **v1-v9**
- Выбрать и установить стратегию от **Flowseal**
- Протестировать все стратегии
- Подобрать стратегию для **YouTube**
- Сделать резервную копию настроек **Zapret** 
- Включить стратегию для игр **Battlefield 6**, **Apex Legend**, **Roblox** и других...
- Установить скрипт для **Discord**
- Включить обход Финских **IP** для **Discord**
- Выбрать стратегию для **discord.media**
- Установить **DoH** (**DNS over HTTPS**) и выбрать **DNS**-сервер
- Получить доступ к **Zapret Manager** из браузера
- Включить блокировку **QUIC** (порты 80,443)
- Включить или выключить **IP** в **hosts**
- Открыть доступ к **AI** сервисам без **VPN**
- Разблокировать **Telegram WEB**, **rutor.info**, **ntc.party**, **lib.rus.ec**, **Instagram***
- Разблокировать разрешение на **Twitch**
- Сменить источник (выбрать зеркало) для пакетов **OpenWRT**

---

## 🔹 Подготовка системы

> [!IMPORTANT]
>для работы некотрых стратегий, в терминале Windows необходимо выполнить:
>```
>netsh int tcp set global timestamps=enabled
>```

- Если у Вас установлен **ByeDPI** или **youtubeUnblock** скрипт выдаст сообщение
- Если у Вас включён **Flow offloading** скрипт выдаст сообщение и в `Системном меню`, появится пункт **0** - **Применить FIX**

---

## 🔹 Запуск менеджера

Подключитесь по **SSH** к роутеру и выполните команду:

```
sh <(wget -O - https://raw.githubusercontent.com/StressOzz/Zapret-Manager/main/Zapret-Manager.sh)
```
или
```
wget -O /tmp/Zapret-Manager.sh https://raw.githubusercontent.com/StressOzz/Zapret-Manager/main/Zapret-Manager.sh && sh /tmp/Zapret-Manager.sh
```
>Если скрипт не запускается, остановите Zapret:
>```
>/etc/init.d/zapret stop
>```

После запуска скрипта по команде выше, в **SSH** скрипт можно запускать командой:
```
zms
```

Для запуска скрипта в браузере или в LuСI:
- запустите скрипт → Системное меню → Активировать доступ к скрипту из браузера

После установки, скрипт будет доступен:
- в браузере по адрессу **http://192.168.1.1:7681**
- в LuCI вкладка **Services** → **Terminal**

---

## 🔹 Быстрый старт

**Пункт 8** — **Удалить → установить → настроить Zapret**

Установка **Zapret** под ключ:
- Удаляет Zapret
- Устанавливает последнюю версию Zapret
- Устанавливает стратегию **v1**
- Устанавливает скрипт **50-stun4all**
- Добавляет в стратегию настройки для игр
- Добавляет домены **Telegram WEB**, **AI**, **rutor.info**, **ntc.party**, **lib.rus.ec**, **Twitch**, **Instagram**  в `hosts`

>⚠️ Использовать только для полной переустановки и настройки Zapret.

## 🔹 Стратегии для Youtube

Если у Вас не запускается **Youtube** на каком-нибудь устройстве, то попробуйте подобрать стратегию только для **YouTube**.

### В скрипте, во втором пункте есть -  Подбор стратегий для YouTube

[Cтратегии для Youtube](https://github.com/StressOzz/Zapret-Manager/blob/main/Strategies_For_Youtube.md)

## 🔹 Стратегии используемые в скрипте

### В скрипте, во втором пункте есть - Тестирование всех стратегий

[Cтратегии используемые в скрипте](https://github.com/StressOzz/Zapret-Manager/blob/main/Strategies.md)

---

[<img width="190" height="175" alt="donate-button-click-donation-charity-600nw-2339825981" src="https://github.com/user-attachments/assets/2999757b-fbf3-4149-bf6c-48bf3e241529" />](https://github.com/StressOzz#-поддержать-проект)

---

## 🔹 Дерево меню Zapret Manager

```text
┌─ 1 Установить / Удалить / Обновить Zapret
│
├─ 2 Запустить / Остановить Zapret
│
├─ 3 Меню стратегий
│  ├─ 1 Выбрать и установить стратегию v1–v9
│  ├─ 2 Выбрать и установить стратегию от Flowseal
│  ├─ 3 Выбрать и установить стратегию для YouTube
│  ├─ 4 Меню тестирование стратегий
│  │  ├─1 Тестировать стратегии v
│  │  ├─2 Тестировать стратегии Flowseal
│  │  ├─3 Тестировать v и Flowseal стратегии
│  │  ├─4 Тестировать текущую стратегию
│  │  ├─5 Тестировать стратегии YouTube
│  │  ├─9 Результаты тестирования стратегий
│  │  ├─0 Удалить результаты тестования
│  │  └─ Enter Выход в меню стратегий3
│  │
│  ├─ 5 Включить / Выключить обход по спискам РКН
│  ├─ 6 Включить / Выключить стратегию для игр
│  ├─ 8 Обновить список исключений
│  └─ Enter Выход в главное меню
│
├─ 4 Меню DNS over HTTPS
│  ├─ 1 Установить / Удалить DNS over HTTPS
│  ├─ 2 Настроить Comss DNS
│  ├─ 3 Настроить Xbox DNS
│  ├─ 4 Настроить dns.malw.link
│  ├─ 5 Настроить dns.malw.link через Cloudflare
│  ├─ 6 Настроить dns.mafioznik.xyz
│  ├─ 7 Настроить dns.astracat.ru
│  ├─ 0 Вернуть настройки DNS по умолчанию
│  └─ Enter Выход в главное меню
│
├─ 5 Меню настройки Discord
│  ├─ 1 Установить скрипт 50-stun4all
│  ├─ 2 Установить скрипт 50-quic4all
│  ├─ 3 Установить скрипт 50-discord-media
│  ├─ 4 Установить скрипт 50-discord
│  ├─ 5 Удалить скрипт Discord
│  ├─ 6 Добавить Финские IP-адреса в hosts
│  ├─ 7 Выбрать и установить стратегию для discord.media
│  └─ Enter Выход в главное меню
│ 
├─ 6 Меню управления настройками
│  ├─ 1 Сделать резервную копию настроек Zapret
│  ├─ 2 Восстановить настройки Zapret из резервной копии
│  ├─ 3 Вернуть настройки Zapret по умолчанию
│  ├─ 4 Показать стратегию из резервной копии
│  ├─ 5 Удалить резервную копию настроек Zapret
│  └─ Enter Выход в главное меню
│
├─ 7 Меню управления доменами в hosts
│  ├─1 Добавить / Удалить 4pda.to
│  ├─2 Добавить / Удалить  rutor.info
│  ├─3 Добавить / Удалить  ntc.party
│  ├─4 Добавить / Удалить  Instagram & Facebook
│  ├─5 Добавить / Удалить  lib.rus.ec
│  ├─6 Добавить / Удалить  AI сервисы
│  ├─7 Добавить / Удалить Twitch
│  ├─8 Добавить / Удалить Telegram Web
│  ├─9 Добавить / Удалить все домены
│  ├─0 Восстановить hosts
│  └─Enter Выход в меню стратегий
│
├─ 8 Удалить → установить → настроить Zapret
│
└─ 0 Системное меню
   ├─ 1 Показать системную информацию
   ├─ 2 Активировать доступ к скрипту из браузера
   ├─ 3 Включить блокировку QUIC (порты 80 и 443)
   ├─ 4 Меню выбора зеркала OpenWrt
   │  ├─1 China
   │  ├─2 Germany
   │  ├─3 Belgium
   │  ├─4 Kazakhstan
   │  ├─5 Netherlands
   │  ├─6 default / OpenWrt
   │  └─Enter Выход в системное меню
   │
   ├─ 5 Запустить проверку blockcheck
   ├─ 0 Применить FIX для Flow Offloading
   └─ Enter Выход в главное меню
```

---

[![Star History Chart](https://api.star-history.com/svg?repos=StressOzz/Zapret-Manager&type=date&legend=top-left)](https://www.star-history.com/#StressOzz/Zapret-Manager&type=date&legend=top-left)

---


# Благодарности:

- **Zapret** by *bol-van* (https://github.com/bol-van)
- **Zapret-OpenWrt** by *remittor* (https://github.com/remittor)
- **Стратегии** by *Flowseal* (https://github.com/Flowseal)

---

*принадлежит компании Meta, признанной экстремистской и запрещённой на территории РФ
